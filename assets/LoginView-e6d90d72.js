import{_ as p,m as u,a as h,b as r,h as f,r as _,o as g,c as v,e as w,d as e,w as l,v as d}from"./index-8afe259a.js";import{s as L,a as b,u as c}from"./loading-6f7c174d.js";const{VITE_API_EMAIL:y,VITE_API_PASS:x}={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"jardar",BASE_URL:"/vue3-week7/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},E={data(){return{email:y,pass:x,isLoading:!1}},computed:{...u(c,["getContainLoading"])},methods:{...h(c,["setContainLoading"]),handleLogin(){if(this.email==""||this.pass==""){alert("請輸入帳密");return}this.setContainLoading(!0),r.post(`${f.epLogin}`,{username:this.email,password:this.pass}).then(o=>{document.cookie=`myToken=${o.data.token}; expires=${new Date(o.data.expires)};`,r.defaults.headers.common.Authorization=o.data.token,L("登入成功");const s=this.$route.query.redirect||"/adm";console.log(s);const n={...this.$route.query};delete n.redirect,this.$router.replace({path:s,query:n})}).catch(o=>{b("錯誤",o.response.data.message||"error","error")}).finally(()=>{this.setContainLoading(!1)})}}},V={class:"container vl-parent"},A={class:"row justify-content-center"},k=e("h1",{class:"h3 mb-3 font-weight-normal"},"請先登入",-1),C={class:"col-8"},I={id:"form",class:"form-signin"},P={class:"form-floating mb-3"},T=e("label",{for:"username"},"Email address",-1),S={class:"form-floating"},D=e("label",{for:"password"},"Password",-1),q=e("p",{class:"mt-5 mb-3 text-muted"},"© 2021~∞ - 六角學院",-1);function U(o,s,n,B,a,i){const m=_("vue-loading");return g(),v("div",V,[w(m,{active:o.getContainLoading,"onUpdate:active":s[0]||(s[0]=t=>o.getContainLoading=t),"can-cancel":!1,"is-full-page":!1},null,8,["active"]),e("div",A,[k,e("div",C,[e("form",I,[e("div",P,[l(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>a.email=t),type:"email",class:"form-control",id:"username",placeholder:"name@example.com",required:"",autofocus:""},null,512),[[d,a.email]]),T]),e("div",S,[l(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>a.pass=t),type:"password",class:"form-control",id:"password",placeholder:"Password",required:""},null,512),[[d,a.pass]]),D]),e("button",{onClick:s[3]||(s[3]=(...t)=>i.handleLogin&&i.handleLogin(...t)),class:"btn btn-lg btn-primary w-100 mt-3",type:"button"}," 登入 ")])])]),q])}const R=p(E,[["render",U]]);export{R as default};
